(function(h,d){typeof exports=="object"&&typeof module<"u"?d(exports):typeof define=="function"&&define.amd?define(["exports"],d):(h=typeof globalThis<"u"?globalThis:h||self,d(h["@walletconnect/logger"]={}))})(this,function(h){"use strict";var d={exports:{}};function ie(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var oe=le;function le(e,t,r){var s=r&&r.stringify||ie,i=1;if(typeof e=="object"&&e!==null){var f=t.length+i;if(f===1)return e;var g=new Array(f);g[0]=s(e);for(var u=1;u<f;u++)g[u]=s(t[u]);return g.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var n="",o=1-i,l=-1,_=e&&e.length||0,a=0;a<_;){if(e.charCodeAt(a)===37&&a+1<_){switch(l=l>-1?l:0,e.charCodeAt(a+1)){case 100:case 102:if(o>=c||t[o]==null)break;l<a&&(n+=e.slice(l,a)),n+=Number(t[o]),l=a+2,a++;break;case 105:if(o>=c||t[o]==null)break;l<a&&(n+=e.slice(l,a)),n+=Math.floor(Number(t[o])),l=a+2,a++;break;case 79:case 111:case 106:if(o>=c||t[o]===void 0)break;l<a&&(n+=e.slice(l,a));var E=typeof t[o];if(E==="string"){n+="'"+t[o]+"'",l=a+2,a++;break}if(E==="function"){n+=t[o].name||"<anonymous>",l=a+2,a++;break}n+=s(t[o]),l=a+2,a++;break;case 115:if(o>=c)break;l<a&&(n+=e.slice(l,a)),n+=String(t[o]),l=a+2,a++;break;case 37:l<a&&(n+=e.slice(l,a)),n+="%",l=a+2,a++,o--;break}++o}++a}return l===-1?e:(l<_&&(n+=e.slice(l)),n)}const M=oe;d.exports=v;const j=Oe().console||{},ae={mapHttpRequest:T,mapHttpResponse:T,wrapRequestSerializer:$,wrapResponseSerializer:$,wrapErrorSerializer:$,req:T,res:T,err:G,errWithCause:G};function y(e,t){return e==="silent"?1/0:t.levels.values[e]}const P=Symbol("pino.logFuncs"),N=Symbol("pino.hierarchy"),ue={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function D(e,t){const r={logger:t,parent:e[N]};t[N]=r}function ce(e,t,r){const s={};t.forEach(i=>{s[i]=r[i]?r[i]:j[i]||j[ue[i]||"log"]||S}),e[P]=s}function fe(e,t){return Array.isArray(e)?e.filter(function(s){return s!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function v(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const r=e.browser.write||j;e.browser.write&&(e.browser.asObject=!0);const s=e.serializers||{},i=fe(e.browser.serialize,s);let f=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(f=!1);const g=Object.keys(e.customLevels||{}),u=["error","fatal","warn","info","debug","trace"].concat(g);typeof r=="function"&&u.forEach(function(b){r[b]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");const c=e.level||"info",n=Object.create(r);n.log||(n.log=S),ce(n,u,r),D({},n),Object.defineProperty(n,"levelVal",{get:l}),Object.defineProperty(n,"level",{get:_,set:a});const o={transmit:t,serialize:i,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:u,timestamp:Le(e),messageKey:e.messageKey||"msg",onChild:e.onChild||S};n.levels=he(e),n.level=c,n.isLevelEnabled=function(b){return this.levels.values[b]?this.levels.values[b]>=this.levels.values[this.level]:!1},n.setMaxListeners=n.getMaxListeners=n.emit=n.addListener=n.on=n.prependListener=n.once=n.prependOnceListener=n.removeListener=n.removeAllListeners=n.listeners=n.listenerCount=n.eventNames=n.write=n.flush=S,n.serializers=s,n._serialize=i,n._stdErrSerialize=f,n.child=function(...b){return E.call(this,o,...b)},t&&(n._logEvent=F());function l(){return y(this.level,this)}function _(){return this._level}function a(b){if(b!=="silent"&&!this.levels.values[b])throw Error("unknown level "+b);this._level=b,O(this,o,n,"error"),O(this,o,n,"fatal"),O(this,o,n,"warn"),O(this,o,n,"info"),O(this,o,n,"debug"),O(this,o,n,"trace"),g.forEach(m=>{O(this,o,n,m)})}function E(b,m,C){if(!m)throw new Error("missing bindings for child Pino");C=C||{},i&&m.serializers&&(C.serializers=m.serializers);const re=C.serializers;if(i&&re){var A=Object.assign({},s,re),ne=e.browser.serialize===!0?Object.keys(A):i;delete m.serializers,V([m],ne,A,this._stdErrSerialize)}function se(x){this._childLevel=(x._childLevel|0)+1,this.bindings=m,A&&(this.serializers=A,this._serialize=ne),t&&(this._logEvent=F([].concat(x._logEvent.bindings,m)))}se.prototype=this;const k=new se(this);return D(this,k),k.child=function(...x){return E.call(this,b,...x)},k.level=C.level||this.level,b.onChild(k),k}return n}function he(e){const t=e.customLevels||{},r=Object.assign({},v.levels.values,t),s=Object.assign({},v.levels.labels,ge(t));return{values:r,labels:s}}function ge(e){const t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}v.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},v.stdSerializers=ae,v.stdTimeFunctions=Object.assign({},{nullTime:U,epochTime:R,unixTime:pe,isoTime:we});function de(e){const t=[];e.bindings&&t.push(e.bindings);let r=e[N];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function O(e,t,r,s){if(Object.defineProperty(e,s,{value:y(e.level,r)>y(s,r)?S:r[P][s],writable:!0,enumerable:!0,configurable:!0}),e[s]===S){if(!t.transmit)return;const f=t.transmit.level||e.level,g=y(f,r);if(y(s,r)<g)return}e[s]=ve(e,t,r,s);const i=de(e);i.length!==0&&(e[s]=be(i,e[s]))}function be(e,t){return function(){return t.apply(this,[...e,...arguments])}}function ve(e,t,r,s){return function(i){return function(){const g=t.timestamp(),u=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===j?j:this;for(var n=0;n<u.length;n++)u[n]=arguments[n];var o=!1;if(t.serialize&&(V(u,this._serialize,this.serializers,this._stdErrSerialize),o=!0),t.asObject||t.formatters?i.call(c,...me(this,s,u,g,t)):i.apply(c,u),t.transmit){const l=t.transmit.level||e._level,_=y(l,r),a=y(s,r);if(a<_)return;ye(this,{ts:g,methodLevel:s,methodValue:a,transmitLevel:l,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:y(e._level,r)},u,o)}}}(e[P][s])}function me(e,t,r,s,i){const{level:f,log:g=l=>l}=i.formatters||{},u=r.slice();let c=u[0];const n={};let o=(e._childLevel|0)+1;if(o<1&&(o=1),s&&(n.time=s),f){const l=f(t,e.levels.values[t]);Object.assign(n,l)}else n.level=e.levels.values[t];if(i.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;o--&&typeof u[0]=="object";)Object.assign(n,u.shift());return[g(n),...u]}else{if(c!==null&&typeof c=="object"){for(;o--&&typeof u[0]=="object";)Object.assign(n,u.shift());c=u.length?M(u.shift(),u):void 0}else typeof c=="string"&&(c=M(u.shift(),u));return c!==void 0&&(n[i.messageKey]=c),[g(n)]}}function V(e,t,r,s){for(const i in e)if(s&&e[i]instanceof Error)e[i]=v.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i])&&t)for(const f in e[i])t.indexOf(f)>-1&&f in r&&(e[i][f]=r[f](e[i][f]))}function ye(e,t,r,s=!1){const i=t.send,f=t.ts,g=t.methodLevel,u=t.methodValue,c=t.val,n=e._logEvent.bindings;s||V(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=f,e._logEvent.messages=r.filter(function(o){return n.indexOf(o)===-1}),e._logEvent.level.label=g,e._logEvent.level.value=u,i(g,e._logEvent,c),e._logEvent=F(n)}function F(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function G(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)t[r]===void 0&&(t[r]=e[r]);return t}function Le(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?U:R}function T(){return{}}function $(e){return e}function S(){}function U(){return!1}function R(){return Date.now()}function pe(){return Math.round(Date.now()/1e3)}function we(){return new Date(Date.now()).toISOString()}function Oe(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}d.exports.default=v;var _e=d.exports.pino=v;const X={level:"info"},z="custom_context",I=1e3*1024;var Se=Object.defineProperty,je=(e,t,r)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,L=(e,t,r)=>je(e,typeof t!="symbol"?t+"":t,r);class ze{constructor(t){L(this,"nodeValue"),L(this,"sizeInBytes"),L(this,"next"),this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class Y{constructor(t){L(this,"lengthInNodes"),L(this,"sizeInBytes"),L(this,"head"),L(this,"tail"),L(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const r=new ze(t);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let r=this.head;for(;r!==null;)t.push(r.value),r=r.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const r=t.value;return t=t.next,{done:!1,value:r}}}}}const Ee=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r);function Z(e){return typeof e=="string"?e:Ee(e)||""}var Ce=Object.defineProperty,ke=(e,t,r)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B=(e,t,r)=>ke(e,typeof t!="symbol"?t+"":t,r);class K{constructor(t,r=I){B(this,"logs"),B(this,"level"),B(this,"levelValue"),B(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=t??"error",this.levelValue=d.exports.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new Y(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,r){r===d.exports.levels.values.error?console.error(t):r===d.exports.levels.values.warn?console.warn(t):r===d.exports.levels.values.debug?console.debug(t):r===d.exports.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(Z({timestamp:new Date().toISOString(),log:t}));const r=typeof t=="string"?JSON.parse(t).level:t.level;r>=this.levelValue&&this.forwardToConsole(t,r)}getLogs(){return this.logs}clearLogs(){this.logs=new Y(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const r=this.getLogArray();return r.push(Z({extraMetadata:t})),new Blob(r,{type:"application/json"})}}var Te=Object.defineProperty,Ie=(e,t,r)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Be=(e,t,r)=>Ie(e,typeof t!="symbol"?t+"":t,r);class Ae{constructor(t,r=I){Be(this,"baseChunkLogger"),this.baseChunkLogger=new K(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const r=URL.createObjectURL(this.logsToBlob(t)),s=document.createElement("a");s.href=r,s.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}}var xe=Object.defineProperty,Pe=(e,t,r)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ne=(e,t,r)=>Pe(e,typeof t!="symbol"?t+"":t,r);class Ve{constructor(t,r=I){Ne(this,"baseChunkLogger"),this.baseChunkLogger=new K(t,r)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}}var Fe=Object.defineProperty,$e=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,J=(e,t,r)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))De.call(t,r)&&J(e,r,t[r]);if(q)for(var r of q(t))Ge.call(t,r)&&J(e,r,t[r]);return e},w=(e,t)=>$e(e,Me(t));function Ue(e){return w(p({},e),{level:e?.level||X.level})}function H(e,t,r=z){return e[r]=t,e}function W(e,t=z){return e[t]||""}function Q(e,t,r=z){const s=W(e,r);return s.trim()?`${s}/${t}`:t}function Re(e,t,r=z){const s=Q(e,t,r),i=e.child({context:s});return H(i,s,r)}function ee(e){var t,r;const s=new Ae((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:d.exports(w(p({},e.opts),{level:"trace",browser:w(p({},(r=e.opts)==null?void 0:r.browser),{write:i=>s.write(i)})})),chunkLoggerController:s}}function te(e){var t,r;const s=new Ve((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:d.exports(w(p({},e.opts),{level:"trace",browser:w(p({},(r=e.opts)==null?void 0:r.browser),{write:i=>s.write(i)})}),s),chunkLoggerController:s}}function Xe(e){var t;if(typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string")return{logger:e.loggerOverride,chunkLoggerController:null};const r=w(p({},e.opts),{level:typeof e.loggerOverride=="string"?e.loggerOverride:(t=e.opts)==null?void 0:t.level});return typeof window<"u"?ee(w(p({},e),{opts:r})):te(w(p({},e),{opts:r}))}h.MAX_LOG_SIZE_IN_BYTES_DEFAULT=I,h.PINO_CUSTOM_CONTEXT_KEY=z,h.PINO_LOGGER_DEFAULTS=X,h.formatChildLoggerContext=Q,h.generateChildLogger=Re,h.generateClientLogger=ee,h.generatePlatformLogger=Xe,h.generateServerLogger=te,h.getDefaultLoggerOptions=Ue,h.getLoggerContext=W,h.pino=_e,h.setLoggerContext=H,Object.defineProperty(h,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
